---
---

<button
	class="theme-toggle"
	aria-label="Switch to dark mode"
	title="Switch to dark mode"
>
	<span class="theme-toggle__icon" aria-hidden="true">🌙</span>
</button>

<style>
	.theme-toggle {
		display: flex;
		align-items: center;
		justify-content: center;
		width: 40px;
		height: 40px;
		padding: var(--spacing-sm);
		background: none;
		border: none;
		border-radius: 50%;
		cursor: pointer;
		transition: background-color 0.2s ease;
	}

	.theme-toggle:hover {
		background-color: rgba(var(--color-gray-light), 0.2);
	}

	.theme-toggle:focus {
		outline: 2px solid var(--color-primary);
		outline-offset: 2px;
	}

	.theme-toggle__icon {
		font-size: var(--font-size-lg);
		line-height: 1;
	}

	@media (prefers-color-scheme: dark) {
		.theme-toggle {
			background-color: rgba(var(--color-gray-dark), 0.2);
		}

		.theme-toggle:hover {
			background-color: rgba(var(--color-gray-dark), 0.4);
		}
	}
</style>

<script>
	const theme = {
		light: {
			label: 'Switch to dark mode',
			icon: '🌙'
		},
		dark: {
			label: 'Switch to light mode',
			icon: '☀️'
		}
	};

	// Get current theme from localStorage or system preference
	const getCurrentTheme = () => {
		const savedTheme = localStorage.getItem('theme') as 'light' | 'dark' | null;
		if (savedTheme) return savedTheme;
		return window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';
	};

	// Set theme
	const setTheme = (theme: 'light' | 'dark') => {
		document.documentElement.setAttribute('data-theme', theme);
		localStorage.setItem('theme', theme);
	};

	// Initialize theme
	const initTheme = () => {
		const currentTheme = getCurrentTheme();
		setTheme(currentTheme);
	};

	// Handle theme toggle
	const handleThemeToggle = () => {
		const currentTheme = document.documentElement.getAttribute('data-theme') as 'light' | 'dark';
		const newTheme = currentTheme === 'light' ? 'dark' : 'light';
		setTheme(newTheme);
		
		// Update button attributes
		const button = document.querySelector('.theme-toggle');
		if (button) {
			const newThemeData = theme[newTheme];
			button.setAttribute('aria-label', newThemeData.label);
			button.setAttribute('title', newThemeData.label);
			const icon = button.querySelector('.theme-toggle__icon');
			if (icon) {
				icon.textContent = newThemeData.icon;
			}
		}
	};

	// Initialize theme on load
	initTheme();

	// Add event listener for theme toggle
	document.addEventListener('DOMContentLoaded', () => {
		const themeToggle = document.querySelector('.theme-toggle');
		if (themeToggle) {
			themeToggle.addEventListener('click', handleThemeToggle);
		}
	});
</script> 