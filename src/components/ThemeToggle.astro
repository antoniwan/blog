---
---

<button
	class="flex items-center justify-center w-10 h-10 p-2 bg-transparent border-none rounded-full cursor-pointer transition-colors hover:bg-gray-100 dark:hover:bg-gray-800 focus:outline-2 focus:outline-primary focus:outline-offset-2"
	aria-label="Switch to dark mode"
	title="Switch to dark mode"
>
	<span class="text-lg leading-none" aria-hidden="true">🌙</span>
</button>

<script>
	const theme = {
		light: {
			label: 'Switch to dark mode',
			icon: '🌙'
		},
		dark: {
			label: 'Switch to light mode',
			icon: '☀️'
		}
	};

	// Get current theme from localStorage or system preference
	const getCurrentTheme = () => {
		const savedTheme = localStorage.getItem('theme') as 'light' | 'dark' | null;
		if (savedTheme) return savedTheme;
		return window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';
	};

	// Set theme
	const setTheme = (theme: 'light' | 'dark') => {
		document.documentElement.classList.toggle('dark', theme === 'dark');
		localStorage.setItem('theme', theme);
	};

	// Initialize theme
	const initTheme = () => {
		const currentTheme = getCurrentTheme();
		setTheme(currentTheme);
	};

	// Handle theme toggle
	const handleThemeToggle = () => {
		const currentTheme = document.documentElement.classList.contains('dark') ? 'dark' : 'light';
		const newTheme = currentTheme === 'light' ? 'dark' : 'light';
		setTheme(newTheme);
		
		// Update button attributes
		const button = document.querySelector('.theme-toggle');
		if (button) {
			const newThemeData = theme[newTheme];
			button.setAttribute('aria-label', newThemeData.label);
			button.setAttribute('title', newThemeData.label);
			const icon = button.querySelector('span');
			if (icon) {
				icon.textContent = newThemeData.icon;
			}
		}
	};

	// Initialize theme on load
	initTheme();

	// Add event listener for theme toggle
	document.addEventListener('DOMContentLoaded', () => {
		const themeToggle = document.querySelector('.theme-toggle');
		if (themeToggle) {
			themeToggle.addEventListener('click', handleThemeToggle);
		}
	});
</script> 