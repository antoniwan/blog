---
import HeaderLink from './HeaderLink.astro';
import { SITE_TITLE } from '../consts';
import ThemeToggle from './ThemeToggle.astro';

const navLinks = [
	{ href: '/', label: 'Home' },
	{ href: '/category', label: 'Categories' },
	{ href: '/about', label: 'About' }
];
---

<header class="sticky top-0 z-sticky bg-background shadow-sm dark:bg-gray-dark" role="banner">
	<nav class="py-4" aria-label="Main navigation">
		<div class="container mx-auto px-4 md:px-8 flex justify-between items-center">
			<a href="/" class="no-underline text-inherit" aria-label="Home">
				<h2 class="m-0 text-xl md:text-2xl font-bold">{SITE_TITLE}</h2>
			</a>
			
			<button 
				class="md:hidden bg-transparent border-none cursor-pointer p-2"
				aria-label="Toggle menu"
				aria-expanded="false"
				aria-controls="header__nav-menu"
				aria-haspopup="true"
			>
				<span class="block w-6 h-6 relative" aria-hidden="true">
					<span class="block w-full h-0.5 bg-current my-1 transition-transform"></span>
					<span class="block w-full h-0.5 bg-current my-1 transition-transform"></span>
					<span class="block w-full h-0.5 bg-current my-1 transition-transform"></span>
				</span>
			</button>

			<div 
				class="md:flex md:items-center md:gap-6 fixed md:static top-0 left-0 right-0 bottom-0 bg-background dark:bg-gray-dark flex-col justify-center items-center transform md:transform-none transition-transform duration-300 translate-x-full md:translate-x-0"
				id="header__nav-menu"
			>
				<ul class="flex md:flex-row flex-col gap-4 md:gap-6 list-none m-0 p-0">
					{navLinks.map(({ href, label }) => (
						<li class="m-0">
							<HeaderLink href={href}>{label}</HeaderLink>
						</li>
					))}
				</ul>
				<div class="md:ml-4 mt-6 md:mt-0">
					<ThemeToggle />
				</div>
			</div>
		</div>
	</nav>
</header>

<script>
	// Handle mobile menu toggle
	const menuButton = document.querySelector('button[aria-controls="header__nav-menu"]');
	const navMenu = document.getElementById('header__nav-menu');

	if (menuButton && navMenu) {
		menuButton.addEventListener('click', () => {
			const isExpanded = menuButton.getAttribute('aria-expanded') === 'true';
			menuButton.setAttribute('aria-expanded', String(!isExpanded));
			navMenu.classList.toggle('translate-x-full');
		});
	}
</script>
