<div class="page-transition">
	<slot />
</div>

<script>
	// Handle page transitions
	document.addEventListener('astro:page-load', () => {
		const pageTransition = document.querySelector('.page-transition') as HTMLElement;
		if (pageTransition) {
			// Add fade-in animation
			pageTransition.style.opacity = '0';
			pageTransition.style.transition = 'opacity 300ms cubic-bezier(0.4, 0, 0.2, 1)';
			
			// Trigger reflow
			pageTransition.offsetHeight;
			
			// Fade in
			pageTransition.style.opacity = '1';
		}
	});
</script>

<style>
	.page-transition {
		opacity: 1;
		transition: opacity 300ms cubic-bezier(0.4, 0, 0.2, 1);
	}

	/* Add loading indicator */
	.page-transition::before {
		content: '';
		position: fixed;
		top: 0;
		left: 0;
		right: 0;
		height: 3px;
		background: linear-gradient(to right, var(--tw-color-primary), var(--tw-color-primary-dark));
		transform: scaleX(0);
		transform-origin: left;
		transition: transform 300ms cubic-bezier(0.4, 0, 0.2, 1);
		z-index: 9999;
	}

	/* Show loading indicator during page load */
	.page-transition.loading::before {
		transform: scaleX(0.3);
		animation: loading 1s ease-in-out infinite;
	}

	@keyframes loading {
		0% {
			transform: scaleX(0.3);
		}
		50% {
			transform: scaleX(0.7);
		}
		100% {
			transform: scaleX(0.3);
		}
	}

	/* Respect reduced motion preferences */
	@media (prefers-reduced-motion: reduce) {
		.page-transition {
			transition: none;
		}

		.page-transition::before {
			display: none;
		}

		@keyframes loading {
			from, to {
				transform: none;
			}
		}
	}
</style> 