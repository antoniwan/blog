---
import { mainNavigation } from '../data/navigation';

interface Props {
  class?: string;
}

const { class: className = '' } = Astro.props;
---

<nav 
	class:list={['flex items-center space-x-1', className]}
	role="navigation"
	aria-label="Main navigation"
>
  {mainNavigation.map((item) => (
    <div class="relative group">
      <a
        href={item.href}
        class="relative px-3 py-2 text-sm font-medium rounded-lg transition-all duration-200 ease-in-out"
        class:list={[
          'text-neutral-700 dark:text-neutral-300 hover:text-primary-600 dark:hover:text-primary-400 hover:bg-neutral-100 dark:hover:bg-neutral-800/50',
          { 
            'text-primary-600 dark:text-primary-400 bg-primary-50 dark:bg-primary-900/20 shadow-sm': 
              Astro.url.pathname === item.href 
          }
        ]}
        aria-current={Astro.url.pathname === item.href ? 'page' : undefined}
        transition:name={`nav-${item.href.replace('/', '').replace(/\/$/, '') || 'home'}`}
      >
        <span class="relative z-10">{item.label}</span>
        {Astro.url.pathname === item.href && (
          <span class="absolute inset-0 bg-primary-100 dark:bg-primary-900/30 rounded-lg -z-10"></span>
        )}
      </a>
      
      {/* Dropdown for categories */}
      {item.dropdown && (
        <div class="absolute top-full left-0 mt-1 w-64 bg-white dark:bg-neutral-900 border border-neutral-200 dark:border-neutral-700 rounded-lg shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 ease-in-out z-50">
          <div class="p-2">
            <div class="px-3 py-2 text-xs font-semibold text-neutral-500 dark:text-neutral-400 uppercase tracking-wide border-b border-neutral-100 dark:border-neutral-800 mb-2">
              {item.dropdown.label}
            </div>
            <div class="space-y-1">
              {item.dropdown.items.map((dropdownItem) => (
                <a
                  href={dropdownItem.href}
                  class="flex items-center gap-3 px-3 py-2 text-sm text-neutral-700 dark:text-neutral-300 rounded-md hover:bg-neutral-50 dark:hover:bg-neutral-800 hover:text-primary-600 dark:hover:text-primary-400 transition-colors duration-150"
                >
                  {dropdownItem.icon && (
                    <span class="text-lg" aria-hidden="true">{dropdownItem.icon}</span>
                  )}
                  <span>{dropdownItem.label}</span>
                </a>
              ))}
            </div>
          </div>
        </div>
      )}
    </div>
  ))}
</nav>

<style>
  /* Smooth transitions for dark mode */
  nav {
    transition: color var(--animation-duration-fast) var(--animation-easing-default);
  }

  /* Respect reduced motion preferences */
  @media (prefers-reduced-motion: reduce) {
    nav {
      transition: none !important;
    }
    nav * {
      transition: none !important;
    }
  }
</style> 