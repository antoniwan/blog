---
import type { HTMLAttributes } from 'astro/types';

type Props = HTMLAttributes<'a'>;

const { href, class: className, ...props } = Astro.props;
const pathname = Astro.url.pathname.replace(import.meta.env.BASE_URL, '');
const subpath = pathname.match(/[^\/]+/g);
const isActive = href === pathname || href === '/' + (subpath?.[0] || '');
---

<a 
	href={href} 
	class="relative text-text dark:text-gray-light no-underline font-medium text-base md:text-lg py-2 transition-all duration-200 hover:text-primary dark:hover:text-primary after:content-[''] after:absolute after:bottom-0 after:left-0 after:w-full after:h-0.5 after:bg-primary after:scale-x-0 after:origin-right after:transition-transform after:duration-300 hover:after:scale-x-100 hover:after:origin-left aria-[current=page]:text-primary aria-[current=page]:after:scale-x-100 aria-[current=page]:font-semibold"
	aria-current={isActive ? 'page' : undefined}
>
	<slot />
</a>
