---
import { Image } from 'astro:assets';

interface GalleryItem {
  src: string;
  alt: string;
  caption?: string;
  width?: number;
  height?: number;
}

interface Props {
  items: GalleryItem[];
  columns?: 1 | 2 | 3 | 4;
  gap?: 'sm' | 'md' | 'lg';
  class?: string;
}

const {
  items,
  columns = 2,
  gap = 'md',
  class: className = ''
} = Astro.props;

const gapClasses = {
  sm: 'gap-2',
  md: 'gap-4',
  lg: 'gap-6'
};

const columnClasses = {
  1: 'grid-cols-1',
  2: 'grid-cols-1 md:grid-cols-2',
  3: 'grid-cols-1 md:grid-cols-2 lg:grid-cols-3',
  4: 'grid-cols-1 md:grid-cols-2 lg:grid-cols-4'
};

---
<div class={`grid ${columnClasses[columns]} ${gapClasses[gap]} ${className}`}>
  {items.map((item) => (
    <figure class="relative overflow-hidden aspect-square">
      <Image
        src={item.src}
        alt={item.alt}
        width={item.width || 400}
        height={item.height || 400}
        loading="lazy"
        class="w-full h-full object-cover transition-all duration-300 hover:scale-105"
      />
      {item.caption && (
        <figcaption class="absolute bottom-0 left-0 right-0 p-2 text-sm text-white bg-black/50">
          {item.caption}
        </figcaption>
      )}
    </figure>
  ))}
</div>

<style>
  @media (prefers-reduced-motion: reduce) {
    figure > :global(img) {
      transition: none;
    }
  }
</style> 