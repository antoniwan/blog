---
import BaseLayout from '../layouts/BaseLayout.astro';
---

<BaseLayout title="Theme Test" description="Testing theme toggle functionality">
  <div class="p-8">
    <h1 class="text-4xl font-bold mb-6">Theme Toggle Test</h1>
    
    <div class="space-y-4">
      <div class="p-4 bg-[rgb(var(--color-bg-alt))] rounded-lg">
        <h2 class="text-2xl font-semibold mb-2">Current Theme Status</h2>
        <p class="mb-2">This background should change with theme</p>
        <p class="text-[rgb(var(--color-text-muted))]">This text should be muted</p>
      </div>
      
      <div class="p-4 border border-[rgb(var(--color-border))] rounded-lg">
        <h2 class="text-2xl font-semibold mb-2">Border Test</h2>
        <p>This border should change color with theme</p>
      </div>
      
      <div class="p-4 bg-[rgb(var(--color-primary))] text-white rounded-lg">
        <h2 class="text-2xl font-semibold mb-2">Primary Color Test</h2>
        <p>This should always be red (primary color)</p>
      </div>
    </div>
    
    <div class="mt-8 p-4 bg-[rgb(var(--color-bg-alt))] rounded-lg">
      <h3 class="text-xl font-semibold mb-2">Debug Info</h3>
      <p>Check the browser console for theme toggle logs</p>
      <p>Click the theme toggle button in the header to test</p>
      
      <div class="mt-4 space-y-2">
        <button 
          id="test-toggle" 
          class="px-4 py-2 bg-[rgb(var(--color-primary))] text-white rounded hover:opacity-80"
        >
          Test Theme Toggle
        </button>
        
        <div class="text-sm">
          <p>Current theme: <span id="current-theme">Loading...</span></p>
          <p>Has dark class: <span id="dark-class-status">Loading...</span></p>
        </div>
      </div>
    </div>
    
    <script>
      // Simple theme toggle test
      document.addEventListener('DOMContentLoaded', function() {
        const testToggle = document.getElementById('test-toggle');
        const currentThemeSpan = document.getElementById('current-theme');
        const darkClassStatusSpan = document.getElementById('dark-class-status');
        
        if (testToggle) {
          testToggle.addEventListener('click', function() {
            const html = document.documentElement;
            const isDark = html.classList.contains('dark');
            
            if (isDark) {
              html.classList.remove('dark');
              localStorage.setItem('theme', 'light');
            } else {
              html.classList.add('dark');
              localStorage.setItem('theme', 'dark');
            }
            
            updateStatus();
          });
        }
        
        function updateStatus() {
          const html = document.documentElement;
          const isDark = html.classList.contains('dark');
          const theme = localStorage.getItem('theme') || 'system';
          
          if (currentThemeSpan) {
            currentThemeSpan.textContent = theme;
          }
          if (darkClassStatusSpan) {
            darkClassStatusSpan.textContent = isDark ? 'Yes' : 'No';
          }
        }
        
        // Initial status update
        updateStatus();
      });
    </script>
  </div>
</BaseLayout>
