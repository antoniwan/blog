---
import BaseLayout from '../../layouts/BaseLayout.astro';
import PostCard from '../../components/PostCard.astro';
import PageSection from '../../components/PageSection.astro';
import { getCollection } from 'astro:content';

// Get all posts
const posts = await getCollection('blog', ({ data }) => {
  return import.meta.env.PROD ? !data.draft : true;
});

// Sort posts by date
const sortedPosts = posts.sort((a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf());
---

<BaseLayout
  title="Blog"
  description="Explore our collection of articles on strength, clarity, ritual, and creation."
  layoutType="default"
  contentWidth="default"
  spacing="comfortable"
>
  <PageSection width="default" spacing="comfortable" class="text-center">
    <h1 class="text-4xl md:text-5xl lg:text-6xl font-bold mb-6 text-text dark:text-text-dark leading-tight tracking-tight">
      Blog
    </h1>
    <p class="text-xl md:text-2xl text-neutral-600 dark:text-neutral-400 leading-relaxed max-w-2xl mx-auto">
      Explore our collection of articles on strength, clarity, ritual, and creation.
    </p>
  </PageSection>

  <PageSection width="default" spacing="default">
    <div class="grid gap-8 md:gap-12">
      {sortedPosts.map(post => (
        <PostCard post={post} />
      ))}
    </div>
  </PageSection>
</BaseLayout> 